var token=localStorage.getItem("MusicianTokenSpotifySecret");const createToken=()=>{const e=new URLSearchParams;e.append("grant_type","client_credentials"),e.append("client_id","4ac8ecaa2fcf47c1a5063769d0ae79e8"),e.append("client_secret","5c1e6b5fb0664185975d44e6293229f1"),fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}).then((e=>e.json())).then((e=>{token=e.access_token,localStorage.setItem("MusicianTokenSpotifySecret",token)})).catch((e=>{}))},albuns={albunsNovosBrasil(){fetch("https://api.spotify.com/v1/browse/new-releases?country=BR&limit=30",{method:"GET",headers:{Authorization:`Bearer ${token}`}}).then((e=>e.json())).then((e=>{null!=e.error?createToken():e.albums.items.forEach((e=>{this.tratamentoAlbum(e,"#novidadesBR")}))})).catch((e=>{}))},albunsNovosUS(){fetch("https://api.spotify.com/v1/browse/new-releases?country=US&limit=30",{method:"GET",headers:{Authorization:`Bearer ${token}`}}).then((e=>e.json())).then((e=>{null!=e.error?createToken():e.albums.items.forEach((e=>{this.tratamentoAlbum(e,"#novidadesUS")}))})).catch((e=>{}))},tratamentoAlbum(e,t){let a=e.name,l=e.external_urls.spotify,s=e.images[0].url;this.criarAlbuns({nome:a,link:l,imagem:s,listname:t})},criarAlbuns(e){let t=document.querySelector(e.listname),a=document.createElement("div");a.classList.add("item");let l=document.createElement("a");l.classList.add("card"),l.href=e.link,l.target="_blank";let s=document.createElement("div");s.classList.add("card-image");let n=document.createElement("img");n.src=e.imagem;let o=document.createElement("div");o.classList.add("card-text");let r=document.createElement("div");r.classList.add("card-text-title"),r.innerHTML=e.nome,s.appendChild(n),o.appendChild(r),l.appendChild(s),l.appendChild(o),a.appendChild(l),t.appendChild(a)}},playlists={playlistBrasil(){fetch("https://api.spotify.com/v1/browse/featured-playlists?country=BR&limit=30",{method:"GET",headers:{Authorization:`Bearer ${token}`}}).then((e=>e.json())).then((e=>{null!=e.error?(createToken(),init.getPlaylistsAndAlbuns()):this.tratamentoPlaylist(e,"#playlistsBr")})).catch((e=>{}))},playlistWorld(){fetch("https://api.spotify.com/v1/browse/featured-playlists?country=US&limit=30",{method:"GET",headers:{Authorization:`Bearer ${token}`}}).then((e=>e.json())).then((e=>{null!=e.error?(createToken(),init.getPlaylistsAndAlbuns()):this.tratamentoPlaylist(e,"#world")})).catch((e=>{}))},tratamentoPlaylist(e,t){e.playlists.items.forEach((e=>{let a=e.name,l=e.images[0].url,s=e.external_urls.spotify;this.criarPlaylists({nome:a,imagem:l,link:s,listName:t})})),this.load++},criarPlaylists(e){let t=document.querySelector(e.listName),a=document.createElement("div");a.classList.add("item");let l=document.createElement("a");l.classList.add("card"),l.href=e.link,l.target="_blank";let s=document.createElement("div");s.classList.add("card-image");let n=document.createElement("img");n.src=e.imagem;let o=document.createElement("div");o.classList.add("card-text");let r=document.createElement("div");r.classList.add("card-text-title"),r.innerHTML=e.nome,s.appendChild(n),o.appendChild(r),l.appendChild(s),l.appendChild(o),a.appendChild(l),t.appendChild(a)}},init={getPlaylistsAndAlbuns(){new Promise(((e,t)=>{playlists.playlistBrasil(),playlists.playlistWorld(),albuns.albunsNovosBrasil(),albuns.albunsNovosUS(),setTimeout((()=>{e(!0)}),3e3)})).then((e=>{document.querySelectorAll(".owl-carousel.skeleton-carousel").forEach((e=>{e.remove()})),$(".owl-carousel").owlCarousel({margin:20,loop:!0,autoWidth:!0,items:9,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!1})})).catch((e=>{}))},createListeners(){document.querySelector(".form-control i").addEventListener("click",(e=>{let t=e.target.parentNode.querySelector("input");t.value.length<=3?t.parentNode.classList.contains("error")||t.parentNode.classList.add("error"):(t.parentNode.classList.contains("error")&&t.parentNode.classList.remove("error"),window.location.href="search.html?search="+t.value)}))}};async function startAll(){$(".owl-carousel.skeleton-carousel").owlCarousel({margin:20,loop:!0,autoWidth:!0,items:9,autoplayTimeout:3e3,autoplayHoverPause:!1}),null!=token&&""!=token||await createToken(),init.createListeners(),init.getPlaylistsAndAlbuns()}startAll();